(()=>{var t={961:(t,e,n)=>{var r,o=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return o(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),r=0,o=e.length;r<o;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),r=0,o=n.length;r<o;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return o(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,o,i,a={},s={},u="",c="",l="",f=2,h=3,p=2,d=[],m=0,g=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=h++,s[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)m<<=1,g==e-1?(g=0,d.push(n(m)),m=0):g++;for(o=l.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o>>=1}else{for(o=1,r=0;r<p;r++)m=m<<1|o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o>>=1}0==--f&&(f=Math.pow(2,p),p++),delete s[l]}else for(o=a[l],r=0;r<p;r++)m=m<<1|1&o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o>>=1;0==--f&&(f=Math.pow(2,p),p++),a[c]=h++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)m<<=1,g==e-1?(g=0,d.push(n(m)),m=0):g++;for(o=l.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o>>=1}else{for(o=1,r=0;r<p;r++)m=m<<1|o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o>>=1}0==--f&&(f=Math.pow(2,p),p++),delete s[l]}else for(o=a[l],r=0;r<p;r++)m=m<<1|1&o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o>>=1;0==--f&&(f=Math.pow(2,p),p++)}for(o=2,r=0;r<p;r++)m=m<<1|1&o,g==e-1?(g=0,d.push(n(m)),m=0):g++,o>>=1;for(;;){if(m<<=1,g==e-1){d.push(n(m));break}g++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var o,i,a,s,u,c,l,f=[],h=4,p=4,d=3,m="",g=[],y={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 2:return""}for(f[3]=l,i=l,g.push(l);;){if(y.index>e)return"";for(a=0,u=Math.pow(2,d),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(l=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;f[p++]=t(a),l=p-1,h--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;f[p++]=t(a),l=p-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,d),d++),f[l])m=f[l];else{if(l!==p)return null;m=i+i.charAt(0)}g.push(m),f[p++]=i+m.charAt(0),i=m,0==--h&&(h=Math.pow(2,d),d++)}}};return i}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}(()=>{"use strict";function t(t,e,n){var r=(n||{}).atBegin;return function(t,e,n){var r,o=n||{},i=o.noTrailing,a=void 0!==i&&i,s=o.noLeading,u=void 0!==s&&s,c=o.debounceMode,l=void 0===c?void 0:c,f=!1,h=0;function p(){r&&clearTimeout(r)}function d(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=this,c=Date.now()-h;function d(){h=Date.now(),e.apply(s,o)}function m(){r=void 0}f||(u||!l||r||d(),p(),void 0===l&&c>t?u?(h=Date.now(),a||(r=setTimeout(l?m:d,t))):d():!0!==a&&(r=setTimeout(l?m:d,void 0===l?t-c:t)))}return d.cancel=function(t){var e=(t||{}).upcomingOnly,n=void 0!==e&&e;p(),f=!n},d}(t,e,{debounceMode:!1!==(void 0!==r&&r)})}const e=globalThis.chrome&&new function t(e){return new Proxy(e,{get:(e,n)=>"function"!=typeof e[n]?new t(e[n]):(...t)=>new Promise(((r,o)=>{e[n](...t,(t=>{chrome.runtime.lastError?o(new Error(chrome.runtime.lastError.message)):r(t)}))}))})}(globalThis.chrome),r=e;let o=!0;function i(t){if(!t)return!1;try{const{pathname:e}=new URL(t,location.origin);return e===location.pathname}catch{return!1}}function a(t){return globalThis.chrome?.runtime?.getManifest?.()}function s(t){let e;return()=>(o&&void 0!==e||(e=t()),e)}const u=s((()=>globalThis.location?.protocol.startsWith("http"))),c=s((()=>"object"==typeof globalThis.chrome?.extension)),l=(s((()=>c()&&u())),()=>f()||h()),f=s((()=>{const t=a();return!(!t||!i(t.background_page||t.background?.page))||Boolean(t?.background?.scripts&&i("/_generated_background_page.html"))})),h=s((()=>i(a()?.background?.service_worker)));s((()=>{if(!c()||!chrome.runtime.getManifest)return!1;const{options_ui:t}=chrome.runtime.getManifest();if("string"!=typeof t?.page)return!1;return new URL(t.page,location.origin).pathname===location.pathname})),s((()=>{if(!c()||!chrome.devtools)return!1;const{devtools_page:t}=chrome.runtime.getManifest();if("string"!=typeof t)return!1;return new URL(t,location.origin).pathname===location.pathname}));var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=(function(){function t(t){this.value=t}function e(e){var n,r;function o(n,r){try{var a=e[n](r),s=a.value;s instanceof t?Promise.resolve(s.value).then((function(t){o("next",t)}),(function(t){o("throw",t)})):i(a.done?"return":"normal",a.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?o(n.key,n.arg):r=null}this._invoke=function(t,e){return new Promise((function(i,a){var s={key:t,arg:e,resolve:i,reject:a,next:null};r?r=r.next=s:(n=r=s,o(t,e))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),this.registeredTypes=e}return m(t,[{key:"get",value:function(t){return void 0!==this.registeredTypes[t]?this.registeredTypes[t]:this.registeredTypes.default}},{key:"register",value:function(t,e){void 0===this.registeredTypes[t]&&(this.registeredTypes[t]=e)}},{key:"registerDefault",value:function(t){this.register("default",t)}}]),t}(),b=function(t){function e(t){d(this,e);var n=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.registerDefault((function(t){return t.getAttribute("name")||""})),n}return g(e,t),e}(v),_=function(t){function e(t){d(this,e);var n=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.registerDefault((function(t){return t.value})),n.register("checkbox",(function(t){return null!==t.getAttribute("value")?t.checked?t.getAttribute("value"):null:t.checked})),n.register("select",(function(t){return function(t){var e,n,r,o=t.options,i=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?i+1:o.length;r=i<0?u:a?i:0;for(;r<u;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||"optgroup"!==n.parentNode.tagName.toLowerCase())){if(e=n.value,a)return e;s.push(e)}return s}(t)})),n}return g(e,t),e}(v);var w=function(t){function e(t){d(this,e);var n=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.registerDefault((function(){return!0})),n.register("radio",(function(t){return t.checked})),n}return g(e,t),e}(v);function A(t){var e=t.match(/[^[\]]+/g),n=void 0;return t.length>1&&t.indexOf("[]")===t.length-2&&(n=e.pop(),e.push([n])),e}function k(t){var e=t.tagName,n=e;return"input"===e.toLowerCase()&&(n=t.getAttribute("type")||"text"),n.toLowerCase()}function O(t,e){return Array.prototype.filter.call(t.querySelectorAll("input,select,textarea"),(function(t){if("input"===t.tagName.toLowerCase()&&("submit"===t.type||"reset"===t.type))return!1;var n=k(t),r=e.keyExtractors.get(n)(t),o=-1!==(e.include||[]).indexOf(r),i=-1!==(e.exclude||[]).indexOf(r),a=!1;if(e.ignoredTypes){var s=!0,u=!1,c=void 0;try{for(var l,f=e.ignoredTypes[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;t.matches(h)&&(a=!0)}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}return!(!o&&(!!e.include||(i||a)))}))}function x(t,e,n){if(!e)return t;var r=e.shift();return t[r]||(t[r]=Array.isArray(r)?[]:{}),0===e.length&&(Array.isArray(t[r])?null!==n&&t[r].push(n):t[r]=n),e.length>0&&x(t[r],e,n),t}var T=function(t){function e(t){d(this,e);var n=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.registerDefault((function(t,e){t.value=e})),n.register("checkbox",(function(t,e){null===e?t.indeterminate=!0:t.checked=Array.isArray(e)?-1!==e.indexOf(t.value):e})),n.register("radio",(function(t,e){void 0!==e&&(t.checked=t.value===e.toString())})),n.register("select",S),n}return g(e,t),e}(v);function S(t,e){for(var n,r,o,i,a=t.options,s=(i=[],null!==(o=e)&&(Array.isArray(o)?i.push.apply(i,o):i.push(o)),i),u=a.length;u--;)r=a[u],s.indexOf(r.value)>-1&&(r.setAttribute("selected",!0),n=!0);n||(t.selectedIndex=-1)}function C(t,e){return t+"["+e+"]"}function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={},o=n.keyJoiner||C;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i],s={};e&&(i=o(e,i)),Array.isArray(a)?(s[i+"[]"]=a,s[i]=a):"object"===(void 0===a?"undefined":p(a))?s=E(a,i,n):s[i]=a,Object.assign(r,s)}return r}var F=n(961);const{compressToEncodedURIComponent:j,decompressFromEncodedURIComponent:M}=F;const N=class{static migrations={removeUnused(t,e){for(const n of Object.keys(t))n in e||delete t[n]}};storageName;storageType;defaults;_form;_migrations;constructor({defaults:t={},storageName:e="options",migrations:n=[],logging:r=!0,storageType:o="sync"}={}){this.storageName=e,this.defaults=t,this.storageType=o,r||(this._log=()=>{}),this._migrations=this._runMigrations(n)}get storage(){return r.storage[this.storageType]}async getAll(){return await this._migrations,this._getAll()}async setAll(t){return await this._migrations,this._setAll(t)}async set(t){return this.setAll({...await this.getAll(),...t})}async syncForm(t){this._form=t instanceof HTMLFormElement?t:document.querySelector(t),this._form.addEventListener("input",this._handleFormInput),this._form.addEventListener("submit",this._handleFormSubmit),chrome.storage.onChanged.addListener(this._handleStorageChangeOnForm),this._updateForm(this._form,await this.getAll())}async stopSyncForm(){this._form&&(this._form.removeEventListener("input",this._handleFormInput),this._form.removeEventListener("submit",this._handleFormSubmit),chrome.storage.onChanged.removeListener(this._handleStorageChangeOnForm),delete this._form)}_log(t,...e){console[t](...e)}async _getAll(){const t=await this.storage.get(this.storageName);return this._decode(t[this.storageName])}async _setAll(t){this._log("log","Saving options",t),await this.storage.set({[this.storageName]:this._encode(t)})}_encode(t){const e={...t};for(const[t,n]of Object.entries(e))this.defaults[t]===n&&delete e[t];return this._log("log","Without the default values",e),j(JSON.stringify(e))}_decode(t){let e=t;return"string"==typeof t&&(e=JSON.parse(M(t))),{...this.defaults,...e}}async _runMigrations(t){if(0===t.length||!l()||!await async function(){return"development"===(await r.management.getSelf())?.installType||new Promise((t=>{chrome.runtime.onInstalled.addListener((()=>{t(!0)})),setTimeout(t,500,!1)}))}())return;const e=await this._getAll(),n=JSON.stringify(e);this._log("log","Found these stored options",{...e}),this._log("info","Will run",t.length,1===t.length?"migration":" migrations");for(const n of t)n(e,this.defaults);n!==JSON.stringify(e)&&await this._setAll(e)}_handleFormInput=t(300,(async({target:t})=>{const e=t;e.name&&(await this.set(this._parseForm(e.form)),e.form.dispatchEvent(new CustomEvent("options-sync:form-synced",{bubbles:!0})))}));_handleFormSubmit(t){t.preventDefault()}_updateForm(t,e){const n=this._parseForm(t);for(const[t,r]of Object.entries(e))n[t]===r&&delete e[t];const r=Object.keys(e);r.length>0&&function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=E(e,null,n);n.keyExtractors=new b(n.keyExtractors||{}),n.inputWriters=new T(n.inputWriters||{}),Array.prototype.forEach.call(O(t,n),(function(t){var e=k(t),o=n.keyExtractors.get(e)(t);n.inputWriters.get(e)(t,r[o])}))}(t,e,{include:r})}_parseForm(t){const e=[];for(const n of t.querySelectorAll("[name]"))n.validity.valid&&!n.disabled&&e.push(n.name.replace(/\[.*]/,""));return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return e.keySplitter=e.keySplitter||A,e.keyExtractors=new b(e.keyExtractors||{}),e.inputReaders=new _(e.inputReaders||{}),e.keyAssignmentValidators=new w(e.keyAssignmentValidators||{}),Array.prototype.forEach.call(O(t,e),(function(t){var r=k(t),o=e.keyExtractors.get(r)(t),i=e.inputReaders.get(r)(t);if(e.keyAssignmentValidators.get(r)(t,o,i)){var a=e.keySplitter(o);n=x(n,a,i)}})),n}(t,{include:e})}_handleStorageChangeOnForm=(t,e)=>{e!==this.storageType||!t[this.storageName]||document.hasFocus()&&this._form.contains(document.activeElement)||this._updateForm(this._form,this._decode(t[this.storageName].newValue))}},P="on-click-default",L={name:"Fade in",delay:.3,byParagraph:!1,startCondition:P},U=new N({defaults:(()=>{let t={defaultAnimation:L};for(let n=1;n<6;n++)t[(e=n,`animateCustom-${e}`)]=L;var e;return console.log("Default options: "),console.log(t),t})(),migrations:[(t,e)=>{console.log("Migration start: savedOptions = "),console.log(t),console.log(JSON.stringify(t)),t.animationName&&(t.defaultAnimation.name=t.animationName,delete t.animationName),t.animationDelay&&(t.defaultAnimation.delay=t.animationDelay,delete t.animationDelay);for(const e in t)t[e]&&!t[e].byParagraph&&(t[e].byParagraph=!1);for(const e in t)t[e]&&!("startCondition"in t[e])&&(console.log(`Updating savedOptions[${e}].startCondition to on-click-default`),t[e].startCondition=P);console.log("Migration end: savedOptions = "),console.log(JSON.stringify(t))},N.migrations.removeUnused]});!async function(){await U.getAll()}(),chrome.runtime.onInstalled.addListener((({reason:t})=>{"install"===t&&chrome.runtime.openOptionsPage()})),chrome.runtime.setUninstallURL("https://turboanimator.com/uninstall.html"),chrome.tabs.onUpdated.addListener((function(t,e,n){"complete"===e.status&&console.log("Tab finished loading",t,n)})),chrome.commands.onCommand.addListener((async function(t){console.log(`Command "${t}" triggered, sending to active tab`),await async function(t){await async function(t){const e=await async function(){let t={active:!0,currentWindow:!0},[e]=await chrome.tabs.query(t);return e}();e&&chrome.tabs.sendMessage(e.id,t)}({command:t})}(t)}))})()})();